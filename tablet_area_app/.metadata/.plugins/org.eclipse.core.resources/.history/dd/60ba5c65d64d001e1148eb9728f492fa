package com.jdd050.tabletApp;

import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.event.*;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;

import javax.swing.*;
import javax.swing.filechooser.*;

import org.json.simple.JSONObject;
import org.json.simple.parser.JSONParser;

public class Main implements ActionListener
{
	
	private JFrame frame;
	private JPanel panel;
	private JLabel selectedFile = new JLabel("No file selected.");
	private JSONObject jo = (JSONObject) new JSONParser().parse(new FileReader(""));;

	// Main class constructor
	public Main() 
	{
		// create window
		frame = new JFrame();
		
		// create panel and define boundaries, layout in grid
		panel = new JPanel();
		panel.setBorder(BorderFactory.createEmptyBorder());
		panel.setLayout(new GridLayout(2,1));
		
		// GUI Elements
		JButton chooseFileBtn = new JButton("Open");
		JButton clearFileBtn = new JButton("Clear");
		// create action listeners for relevant elements
		chooseFileBtn.addActionListener(this);
		clearFileBtn.addActionListener(this);
		
		// add GUI elements to the panel
		panel.add(chooseFileBtn);
		panel.add(clearFileBtn);
		panel.add(selectedFile);
		
		// add our panel to the frame (window) and define important properties
		frame.add(panel, BorderLayout.CENTER);
		frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		frame.setTitle("OpenTabletDriver Config App");
		frame.pack();
		frame.setMinimumSize(new Dimension(800, 600));
		frame.setVisible(true);
	}

	// ReadFile method
	public static String readFile(String[] args)
	{
		// define Main constructor
		Main mainConstructor = new Main();
		
		String profiles = (String) mainConstructor.jo.get("Profiles");
		System.out.println(profiles);
		return "";
	}
	
	// main method
	public static void main(String[] args) 
	{
		readFile(null);
	}

	// actions to be performed when ActionListener is triggered (with respect to element(s))
	@Override
	public void actionPerformed(ActionEvent e) 
	{
		String command = e.getActionCommand();
		// if user presses the open button, show the open dialog.
		if (command.equals("Open")) 
		{
			// create object of JFileChooser Class
			JFileChooser file = new JFileChooser(FileSystemView.getFileSystemView().getHomeDirectory());
			// show the open dialog
			int open = file.showOpenDialog(null);
			// if the user selected a file
			if (open == JFileChooser.APPROVE_OPTION) 
			{
				selectedFile.setText(file.getSelectedFile().getAbsolutePath());;
				
			}
			else 
			{
				selectedFile.setText("File open operation cancelled");
			}
		}
		
		// If the user presses the clear button, clear the selected file
		if (command.equals("Clear")) {
			selectedFile.setText("No file selected.");
		}
	}
}